"use strict";function BarChart(targetId,width,height,data){const chart=this;this.configureChart(targetId,width,height,data),this.performPreOperations(),this.drawChart()}function getRandomInt(min,max){return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min))+min}BarChart.prototype.configureChart=function(targetId,width,height,data){const chart=this;this.setCanvasParameters(targetId,width,height,data),this.setChartParameters()},BarChart.prototype.setCanvasParameters=function(targetId,width,height,data){const chart=this;this.id=targetId,this.width=width,this.height=height,this.data=data},BarChart.prototype.setChartParameters=function(){const chart=this;this.axisRatio=10,this.verticalMargin=this.height*this.axisRatio/100,this.horizontalMargin=this.width*this.axisRatio/100,this.axisColor="#b1b1b1",this.axisWidth=.75,this.fontRatio=3,this.fontFamily="times",this.fontStyle="normal",this.fontWeight="300",this.fontColor="#666",this.verticalFontSize=this.height*this.fontRatio/100,this.horizontalFontSize=this.width*this.fontRatio/100,this.guidelineColor="#e5e5e5",this.guidelineWidth=.5},BarChart.prototype.performPreOperations=function(){const chart=this;this.createCanvas(),this.handleData(),this.prepareData()},BarChart.prototype.createCanvas=function(){const chart=this,canvas=document.createElement("canvas");canvas.id=this+"-"+Math.random(),canvas.width=this.width,canvas.height=this.height,document.getElementById(this.id).innerHTML="",document.getElementById(this.id).appendChild(canvas),this.canvas=canvas,this.context=canvas.getContext("2d")},BarChart.prototype.handleData=function(){const chart=this;chart.labels=[],chart.values=[],chart.data.forEach(item=>{chart.labels.push(item.label),chart.values.push(item.value)})},BarChart.prototype.prepareData=function(){const chart=this;this.itemsNum=this.data.length,this.maxValue=Math.max.apply(null,this.values),this.minValue=Math.min.apply(null,this.values),this.verticalAxisWidth=this.height-2*this.verticalMargin,this.horizontalAxisWidth=this.width-2*this.horizontalMargin,this.verticalUpperBound=10*Math.ceil(this.maxValue/10),this.verticalLabelFreq=this.verticalUpperBound/this.itemsNum,this.horizontalLabelFreq=this.horizontalAxisWidth/this.itemsNum},BarChart.prototype.drawChart=function(){const chart=this;this.drawVerticalAxis(),this.drawVerticalLabels(),this.drawHorizontalAxis(),this.drawHorizontalLabels(),this.drawHorizontalGuidelines(),this.drawVerticalGuidelines(),this.drawBars()},BarChart.prototype.drawVerticalAxis=function(){const chart=this;this.context.beginPath(),this.context.strokeStyle=this.axisColor,this.context.lineWidth=this.axisWidth,this.context.moveTo(this.horizontalMargin,this.verticalMargin),this.context.lineTo(this.horizontalMargin,this.height-this.verticalMargin),this.context.stroke()},BarChart.prototype.drawVerticalLabels=function(){const chart=this,labelFont=chart.fontStyle+" "+chart.fontWeight+" "+chart.verticalFontSize+"px "+chart.fontFamily;chart.context.font=labelFont,chart.context.textAlign="right",chart.context.fillStyle=chart.fontColor;const scaledVerticalLabelFreq=chart.verticalAxisWidth/chart.verticalUpperBound*chart.verticalLabelFreq;for(let i=0;i<=chart.itemsNum;i++){const labelText=chart.verticalUpperBound-i*chart.verticalLabelFreq,verticalLabelX=chart.horizontalMargin-chart.horizontalMargin/chart.axisRatio,verticalLabelY=chart.verticalMargin+i*scaledVerticalLabelFreq;chart.context.fillText(labelText,verticalLabelX,verticalLabelY)}},BarChart.prototype.drawHorizontalAxis=function(){const chart=this;this.context.beginPath(),this.context.strokeStyle=this.axisColor,this.context.lineWidth=this.axisWidth,this.context.moveTo(this.horizontalMargin,this.height-this.verticalMargin),this.context.lineTo(this.width-this.horizontalMargin,this.height-this.verticalMargin),this.context.stroke()},BarChart.prototype.drawHorizontalLabels=function(){const chart=this,labelFont=chart.fontStyle+" "+chart.fontWeight+" "+chart.verticalFontSize+"px "+chart.fontFamily;chart.context.font=labelFont,chart.context.textAlign="center",chart.context.textBaseline="top",chart.context.fillStyle=chart.fontColor;for(let i=0;i<chart.itemsNum;i++){const horizontalLabelX=chart.horizontalMargin+i*chart.horizontalLabelFreq+chart.horizontalLabelFreq/2,horizontalLabelY=chart.height-chart.verticalMargin+chart.verticalMargin/chart.axisRatio;chart.context.fillText(chart.labels[i],horizontalLabelX,horizontalLabelY)}},BarChart.prototype.drawHorizontalGuidelines=function(){const chart=this;chart.context.strokeStyle=chart.guidelineColor,chart.context.lineWidth=chart.guidelineWidth;const scaledVerticalLabelFreq=chart.verticalAxisWidth/chart.verticalUpperBound*chart.verticalLabelFreq;for(let i=0;i<=chart.itemsNum;i++){const horizontalGuidelineStartX=chart.horizontalMargin,horizontalGuidelineStartY=chart.verticalMargin+i*scaledVerticalLabelFreq,horizontalGuidelineEndX=chart.horizontalMargin+chart.horizontalAxisWidth,horizontalGuidelineEndY=chart.verticalMargin+i*scaledVerticalLabelFreq;chart.context.beginPath(),chart.context.moveTo(horizontalGuidelineStartX,horizontalGuidelineStartY),chart.context.lineTo(horizontalGuidelineEndX,horizontalGuidelineEndY),chart.context.stroke()}},BarChart.prototype.drawVerticalGuidelines=function(){const chart=this;chart.context.strokeStyle=chart.guidelineColor,chart.context.lineWidth=chart.guidelineWidth;for(let i=0;i<=chart.itemsNum;i++){const verticalGuidelineStartX=chart.horizontalMargin+i*chart.horizontalLabelFreq,verticalGuidelineStartY=chart.height-chart.verticalMargin,verticalGuidelineEndX=chart.horizontalMargin+i*chart.horizontalLabelFreq,verticalGuidelineEndY=chart.verticalMargin;chart.context.beginPath(),chart.context.moveTo(verticalGuidelineStartX,verticalGuidelineStartY),chart.context.lineTo(verticalGuidelineEndX,verticalGuidelineEndY),chart.context.stroke()}},BarChart.prototype.drawBars=function(){const chart=this,color=chart.createRandomRGBColor();for(let i=0;i<chart.itemsNum;i++){const color=chart.createRandomRGBColor(),fillOpacity="0.3",fillColor=`rgba(${color.r}, ${color.g}, ${color.b}, ${fillOpacity})`,borderColor=`rgba(${color.r}, ${color.g}, ${color.b})`;chart.context.beginPath();const barX=chart.horizontalMargin+i*chart.horizontalLabelFreq+2*chart.horizontalLabelFreq/chart.axisRatio,barY=chart.height-chart.verticalMargin,barWidth=chart.horizontalLabelFreq-2*chart.horizontalLabelFreq/chart.axisRatio,barHeight=-1*chart.verticalAxisWidth*chart.values[i]/chart.maxValue;chart.context.fillStyle=fillColor,chart.context.strokeStyle=borderColor,chart.context.rect(barX,barY,barWidth,barHeight),chart.context.stroke(),chart.context.fill()}},BarChart.prototype.createRandomRGBColor=function(){const red=getRandomInt(0,257),green=getRandomInt(0,257),blue=getRandomInt(0,257);return{r:red,g:green,b:blue}};